---
title: Настройка языка и структуры модели
sidebar: guide-practical-guides_sidebar
keywords: guide, ember-flexxberry, flexberry designer, стадия, диаграмма классов
toc: true
permalink: ru/gpg_setting-language-and-structure.html
lang: ru
---

{% include important.html content="Описанный ниже алгоритм получения веб-приложения доступен после выполнения [Практического руководства по созданию UML-диаграмм](gpg_practical-guides-uml.html)." %}

Перед тем, как работать с Ember Flexberry, рассмотрим вопрос выбора языка для компонентов будущего приложения. Требуется уточнение, что речь идет не о языке интерфейса, а о языке наименования моделей и их атрибутов.

В [практическом руководстве по Flexberry ASP.NET](gpg_preparatory-stage.html) используются преимущественно модели с наименованиями на русском языке. Данный подход удобен с точки зрения понимания сущностей компонентов, однако при разработке приложений на Ember Flexberry рекомендовано использовать английский язык именования.
С общими правилами именования переменных можно ознакомиться [тут](https://learn.javascript.ru/variable-names).

Данный выбор трактуется не только с позиций сложившейся мировой практики программирования, но также предосторожностями при работе с Ember: в процессе выполнения вполне может сложиться такая ситуация, в которой определенные зависимости и скрипты могут не сработать из-за наличия кириллицы в наименованиях. Кроме того, ряд браузеров работают нестабильно, если в серверных API присутствует кириллица ([ограничения именования в JavaScript](https://learn.javascript.ru/variables#variable-naming)). В связи с этим, переведем наше приложение на английский язык.

## Дублирование стадии

Для того, чтобы исходная модель, пригодная для разных практических руководств, оставалась неизменной, дублируем стадию. Для этого выполним команду “Экспорт стадии”:

![Экспорт стадии](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/1.png)

Сохраним стадию локально, после чего вновь загрузим в Flexberry Designer через команду “Импорт стадии”:

![Импорт стадии](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/2.png)

Сохраним дубликат стадии под названием **Стадия (ember)**.

## Именование классов

В первую очередь переименуем классы. Для этого откроем диаграмму классов “Сущности” и выделим класс “**Заказ**”. Для того, чтобы переименовать класс, требуется вызвать контекстное меню и нажать “Переименовать”:

*`Заказ → [правая кнопка мыши (ПКМ)] → Переименовать`*

![Переименование класса](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/3.png)

Введем в появившемся поле новое имя - **Order**.

{% include important.html content="Всегда используйте для классов команду “Переименовать”. Не пытайтесь переименовать классы путем редактирования их названия напрямую из диаграммы: это может привести к ошибкам." %}

---
**_Самостоятельно_** переименуйте остальные классы следующим образом:

> Заказ → Order  
> СтрокаЗаказа → OrderItem  
> СостояниеЗаказа → OrderStatus  
> Накладная → Invoice  
> ЗаписьВНакладной → InvoiceItem  
> СостояниеНакладной → InvoiceStatus  
> Склад → Storehouse  
> ТоварНаСкладе → StoreProduct  
> Товар → Product  
> Сотрудник → Employee  
> Документ → Document

---

{% include warning.html content="Подходите осторожно к самостоятельному выбору имен классов: избегайте использования системных имен (например, если назвать Storehouse именем Store, то при запуске ember-приложения возникнет конфликт с системным словом store)." %}

**По итогу** данного шага у вас должна получиться следующая диаграмма:

![Диаграмма с настроенными именами классов](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/4.png)

Для того, чтобы в интерфейсе приложения, в отличии от кода, фигурировали русские наименования, требуется задать свойство Caption у класса. Для того, чтобы это сделать, выполните:

*`Order → [ПКМ] → ORM: Редактировать свойства`*

![Настройка заголовка класса](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/5.png)

Здесь мы можем видеть, что верное именование уже проставлено. Причиной этому служит тот факт, что создавали мы классы именно на русском языке и при создании автоматически были проставлены значения свойств “Description” И “Caption”.

Если вы будете создавать классы изначально на английском, не забывайте уточнять отображение их заголовков.

## Именование атрибутов

Рассмотрим переименование атрибутов на примере класса Order (Заказ). Для этого выполним следующие команды:

*`Order → [ПКМ] → ORM: Редактировать свойства → Атрибуты`*

В открывшемся окне изменим поля следующим образом:

![Вкладка редакирования атрибутов](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/6.png)

> Статус → Status  
> ДатаОтгрузки → ShipmentDate  
> ДатаОплаты → PaymentDate  
> Цена → TotalSum

{% include important.html content="Так как мы изменили наименование класса спискового типа “СтатусЗаказа” на “OrderStatus”, мы также должны изменить тип свойства для статуса заказа. То же нужно будет сделать для Invoice (Накладная).  
Атрибуты класса можно редактировать непосредственно из диаграммы." %}

---
**_Самостоятельно_** переименуйте атрибуты остальных классов следующим образом:

**Order**

> Отменить() → Cancel() *

**OrderItem**
> Количество → Amount  
> ЦенаСНалогами → PriceWTaxes  
> Сумма → TotalSum

**Invoice**
> Статус → Status  
> ДатаВремяОтгрузки → ShipmentDateTime  
> Сумма → TotalSum  
> Вес → TotalWeight  
> Примечание → Note  
> ФИОПолучателя → CustomerName  
> **Особо**: СостояниеНакладной → InvoiceStatus

**InvoiceItem**
> Количество → Amount  
> Вес → Weight  
> Цена → Price  
> Сумма → TotalSum

**Storehouse**
> Номер → Number  
> Адрес → Address

**StoreProduct**
> Количество → Amount

**Product**
> КодТовара → ProductCode  
> Название → Name  
> ЕдиницаИзмерения → Measure  
> Описание → Description  
> Цена → Price  

**Employee**
> ТабельныйНомер → Number  
> Фамилия → LastName  
> Имя → FirstName  
> Отчество → MiddleName  
> Телефон → PhoneNumber  
> EMail → Email

**Document**
> Номер → Number  
> ДатаЗаполнения → CreateDate
---------------------------------------------------

*Подсказка*:  
переименовать метод можно прямо на диаграмме или во вкладке:

*`Order → [ПКМ] → ORM: Редактировать свойства → Методы`*

## Именование ролей ассоциаций

Рядом с классом Employee (Работник) указаны наименования ролей для ассоциативных связей, которые данные ассоциации представляют для класса Работник, так как в разных связях роль Работника отличается. Их именование также нужно изменить:

> МатериальноОтветственноеЛицо → ResponsiblePerson  
> Кладовщик → Storekeeper  
> Менеджер → Manager  

## Локализация списков

Классы с типом “enumeration” представляют собой особый тип данных, т.к. они представляют собой фиксированный набор значений, который указывается для свойств различных классов. Чтобы их настроить, перейдем:

*`OrderStatus → [ПКМ] → ORM: Редактировать свойства → Возможные значения`*

Для внутренней работы приложения требуется в поле **Name** ввести **английское наименование**. Однако, чтобы локализация списков в приложении была русской, перенесем **русские наименования** в колонку **Caption**:

> Новый → New  
> Оплаченный → Paid  
> Отменённый → Canceled

![Вкладка настройки пунктов списка](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/7.png)

---
**_Самостоятельно_** переименуйте значения остальных перечислений следующим образом:

**InvoiceStatus**
> Новая → New
> Выписанная → Issued  
> Приостановленная → Paused  
> Готовая → Ready  
> Отгруженная → Shipped
---

## Доработка структуры модели

Внесем часть изменений в диаграмму классов, чтобы она наиболее точно описывала предметную область:

(1) Добавим поле Weight типа double в класс Product

![Новое поле Weight в классе Product](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/8.png)

Это поле необходимо для того, чтобы описать вес единицы конкретного товара. Таким образом, вес в строке накладной может быть рассчитан на основании веса единица товара и его количества.

(2) Создадим список PositionList (тип enumeration) со значениями:

> Кладовщик → Storekeeper  
> Менеджер → Manager

![Добавление списка](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/9.png)

Материально ответственным лицом будут кладовщики, поэтому отдельно это значение не заносим.

(3) Добавим поле **Position** (в значении должность) типа **PositionList** в класс Employee

![Новое поле Position типа PositionList в классе Empoyee](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/10.png)

Оно необходимо постольку, поскольку конкретного сотрудника принимают на вполне конкретную должность: мы должны это учитывать.

## Итог

В результате всех изменений диаграмма классов должна принять следующий вид:

![Итог настройки языка и структуры](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/11.png)

Нужно отметить, что именование сущностей при помощи полноценного перевода русских слов на английский применяется не всегда. Она эффективна только в том случае, когда вся команда способна вести разработку на английском языке. Вместо полноценного перевода иногда используют побуквенный, то есть транслитерацию, когда слово на русском языке просто пишется латиницей, например:

`Заказ - Order - Zakaz`

Выбор способа именования устанавливается руководителем проекта или ведущим программистом и является единым для всей команды.


## Перейти

* [Практическое руководство  «Делай как я»](gpg_landing-page.html) <i class="fa fa-arrow-up" aria-hidden="true"></i>